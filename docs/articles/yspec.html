<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>yspec • yspec</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="yspec">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">yspec</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/yspec.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/project.html">Project Object and Define Document</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>yspec</h1>
                        <h4 class="author">STATUS: development</h4>
            
            <h4 class="date">2019-01-12</h4>
      
      
      <div class="hidden name"><code>yspec.Rmd</code></div>

    </div>

    
    
<div id="about" class="section level2">
<h2 class="hasAnchor">
<a href="#about" class="anchor"></a>About</h2>
<p>The <code>yspec</code> package will read you data specification file when it is written in a specific <code>yaml</code> format.</p>
<p>For each data set in your project that needs documentation, create a yaml file that lists the columns in the data set along with details about the data in that column. This yaml file can be loaded into your R session into an object that you can work with. This is referred to as a <code>spec</code> object. The term <code>spec</code> refers to a single documented data object / data file.</p>
<p>Once all of your data sets have been documented with their own yaml file, you can create another object called a <code>yproj</code> objects. This is used to template the rendering of a single integrated data definitions file for your entire project.</p>
Keep reading to see how it works.
<hr>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(yspec)</a></code></pre></div>
</div>
<div id="example-spec-file" class="section level2">
<h2 class="hasAnchor">
<a href="#example-spec-file" class="anchor"></a>Example spec file</h2>
<p>An example specification file looks like:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">specfile &lt;-<span class="st"> </span>yspec<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/yspec/topics/load_spec_ex">file_spec_ex</a></span>()</a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cat">cat</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/readLines">readLines</a></span>(specfile)[<span class="dv">1</span><span class="op">:</span><span class="dv">29</span>], <span class="dt">sep =</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</a></code></pre></div>
<pre><code>  SETUP__:
    primary_key: [ID,EVID,SEQ]
    lookup_file: [_yspec_lookup.yml]
  C:
    type: character
    long: commented rows
    values: [".",C]
    lookup: true
  USUBJID:
    type: character
    long: universal subject identifier
  ID:
    long: NONMEM ID number
  EVID:
    lookup: true
  MDV:
    lookup: true
  SEQ:
    long: record type indicators
    values: {concentration: 1, response: 2, other: 3}
  AMT:
    about: [amount, mg]
    long: dose amount
    range: [0,1000]
  II:
    about: [II, hours]
    long: interdose interval
  CMT:
    about: Compartment</code></pre>
<p>Once the data specification <code>yaml</code> file is written, it can be loaded in <code>R</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">spec &lt;-<span class="st"> </span><span class="kw"><a href="../reference/load_spec.html">ys_load</a></span>(specfile)</a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3">spec</a></code></pre></div>
<pre><code>   col name    type      unit          short                        
    1  C       character .             commented row indicator      
    2  USUBJID character .             USUBJID                      
    3  ID      numeric   .             ID                           
    4  EVID    numeric   .             event ID                     
    5  MDV     numeric   .             MDV                          
    6  SEQ     numeric   .             SEQ                          
    7  AMT     numeric   mg            amount                       
    8  II      numeric   hours         II                           
    9  CMT     numeric   .             Compartment                  
   10  TAFD    numeric   hours         TAFD                         
   11  WT      numeric   kg            Weight                       
   12  EGFR    numeric   ml/min/1.73m2 eGFR                         
   13  STUDY   character .             Study                        
   14  SEX     numeric   .             SEX                          
   15  BQL     numeric   .             below limit of quantification
   16  DV      numeric   ng/mL         DV                           
   17  DV2     numeric   .             DV2                          
   18  HAIR    character .             HAIR                         
   19  CLCR    numeric   ml/min        creatinine clearance         
   20  ALB     numeric   g/dL          adjusted albumin</code></pre>
<p>Data from specific columns can be printed</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">spec<span class="op">$</span>WT</a></code></pre></div>
<pre><code>   name  value    
   col   WT       
   type  numeric  
   short Weight   
   unit  kg       
   range 40 to 100</code></pre>
<p>or summarized</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(spec, WT, DV, EGFR)</a></code></pre></div>
<pre><code>  Weight (kg)
    type: numeric
    range: [40, 100]
  ------
  DV (ng/mL)
    type: numeric
  ------
  eGFR (ml/min/1.73m2)
    type: numeric
    range: [10, 300]
  ------</code></pre>
</div>
<div id="example-to-render-spec" class="section level2">
<h2 class="hasAnchor">
<a href="#example-to-render-spec" class="anchor"></a>Example to render spec</h2>
<p>The specification object can be rendered to a specification file with the <code>ys_document</code> function</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw"><a href="../reference/ys_document.html">ys_document</a></span>(spec, <span class="dt">stem =</span> <span class="st">"working_document"</span>)</a></code></pre></div>
<p>With output <a href="working_document.pdf">here</a>.</p>
<p><code>ys_document</code> will pass along arguments to <code><a href="https://www.rdocumentation.org/packages/rmarkdown/topics/render">rmarkdown::render</a></code> so that you can control those aspects of how the document is rendered. You can also create custom output formats to get the data table to render in the way that you like.</p>
</div>
<div id="example-project-object" class="section level2">
<h2 class="hasAnchor">
<a href="#example-project-object" class="anchor"></a>Example project object</h2>
<p>To create an project-wide listing of documented data sets, we create a <code>yproj</code> or project object. We create this from the spec objects that we read about in the previous section. Let’s load another object to use along with the object loaded in the previous section.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">pdspec &lt;-<span class="st"> </span><span class="kw"><a href="../reference/load_spec_ex.html">load_spec_ex</a></span>(<span class="st">"DEM104101F_PKPD.yml"</span>)</a></code></pre></div>
<p>Now, we have two objects to work with:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(spec)</a></code></pre></div>
<pre><code>##    col    name      type  unit                   short
## 1    1       C character     . commented row indicator
## 2    2 USUBJID character     .                 USUBJID
## 3    3      ID   numeric     .                      ID
## 4    4    EVID   numeric     .                event ID
## 5    5     MDV   numeric     .                     MDV
## 6    6     SEQ   numeric     .                     SEQ
## 7    7     AMT   numeric    mg                  amount
## 8    8      II   numeric hours                      II
## 9    9     CMT   numeric     .             Compartment
## 10  10    TAFD   numeric hours                    TAFD</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(pdspec)</a></code></pre></div>
<pre><code>##    col name      type           unit       short
## 1    1    C character              .           C
## 2    2  MDV   numeric              .         MDV
## 3    3  SEQ   numeric              .         SEQ
## 4    4  AMT   numeric             mg         AMT
## 5    5   II   numeric          hours          II
## 6    6  CMT   numeric              . Compartment
## 7    7 TAFD   numeric          hours        TAFD
## 8    8   WT   numeric             kg      Weight
## 9    9 EGFR   numeric ml/min/1.73 m2        eGFR
## 10  10  SEX   numeric              .         SEX</code></pre>
<p>We can create a project object from both objects</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">proj &lt;-<span class="st"> </span><span class="kw"><a href="../reference/as_proj_spec.html">ys_project</a></span>(spec,pdspec)</a>
<a class="sourceLine" id="cb16-2" title="2"></a>
<a class="sourceLine" id="cb16-3" title="3">proj</a></code></pre></div>
<pre><code>## projectnumber:   
## sponsor:         
## --------------------------------------------
## datafiles: 
##  name            description                       data_stem      
##  spec            [data set description]            spec           
##  DEM104101F_PKPD Population PKPD analysis data set DEM104101F_PKPD</code></pre>
</div>
<div id="render-a-project-file" class="section level2">
<h2 class="hasAnchor">
<a href="#render-a-project-file" class="anchor"></a>Render a project file</h2>
<p>To render the project file we’ll use the same <code><a href="../reference/ys_document.html">ys_document()</a></code> function.<br>
This time, we’ll add some extra (optional) arguments that will help us get the document to look the way we want:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="kw"><a href="../reference/ys_document.html">ys_document</a></span>(</a>
<a class="sourceLine" id="cb18-2" title="2">  proj, </a>
<a class="sourceLine" id="cb18-3" title="3">  <span class="dt">stem =</span> <span class="st">"project_document"</span>, </a>
<a class="sourceLine" id="cb18-4" title="4">  <span class="dt">build_dir =</span> <span class="kw"><a href="../reference/mrgtemplate.html">mrgtemplate</a></span>(),</a>
<a class="sourceLine" id="cb18-5" title="5">  <span class="dt">author =</span> <span class="st">"Michelle Johnson"</span>, </a>
<a class="sourceLine" id="cb18-6" title="6">  <span class="dt">title =</span> <span class="st">"Analysis data specification"</span></a>
<a class="sourceLine" id="cb18-7" title="7">)</a></code></pre></div>
<p>With output <a href="project_document.pdf">here</a>.</p>
<p>Using the <code>build_dir</code> argument gets us the document rendered with Metrum Research Group branding. Also, <code>author</code> and <code>title</code> are passed into the configuration fields for this document.</p>
<p>To get a document that is formatted according to FDA requirements, use:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="kw"><a href="../reference/ys_document.html">ys_document</a></span>(</a>
<a class="sourceLine" id="cb19-2" title="2">  proj, </a>
<a class="sourceLine" id="cb19-3" title="3">  <span class="dt">type =</span> <span class="st">"regulatory"</span>,</a>
<a class="sourceLine" id="cb19-4" title="4">  <span class="dt">stem =</span> <span class="st">"fda_document"</span>, </a>
<a class="sourceLine" id="cb19-5" title="5">  <span class="dt">build_dir =</span> <span class="kw"><a href="../reference/mrgtemplate.html">mrgtemplate</a></span>(),</a>
<a class="sourceLine" id="cb19-6" title="6">  <span class="dt">author =</span> <span class="st">"Michelle Johnson"</span>, </a>
<a class="sourceLine" id="cb19-7" title="7">  <span class="dt">title =</span> <span class="st">"Analysis data specification"</span></a>
<a class="sourceLine" id="cb19-8" title="8">)</a></code></pre></div>
<p>With output <a href="fda_document.pdf">here</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#about">About</a></li>
      <li><a href="#example-spec-file">Example spec file</a></li>
      <li><a href="#example-to-render-spec">Example to render spec</a></li>
      <li><a href="#example-project-object">Example project object</a></li>
      <li><a href="#render-a-project-file">Render a project file</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Kyle T Baron.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
