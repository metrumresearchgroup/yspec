<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Extend a yspec object — ys_extend • yspec</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Extend a yspec object — ys_extend"><meta property="og:description" content="Use this function to read and join another spec file to an existing
yspec object. The additional spec file can contain additional columns
that might be added to the data set on an ad-hoc basis or could include
modeling outputs (e.g. IPRED)."><meta property="og:image" content="https://metrumresearchgroup.github.io/yspec/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">yspec</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/yspec.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/reference.html">Yaml specification reference</a>
    </li>
    <li>
      <a href="../articles/analysis1.html">Example yaml specification file</a>
    </li>
    <li>
      <a href="../articles/lookup.html">Project-wide column definitions</a>
    </li>
    <li>
      <a href="../articles/ysdb_internal.html">Internal Column Lookup Database</a>
    </li>
    <li>
      <a href="../articles/project.html">Project object and define document</a>
    </li>
    <li>
      <a href="../articles/label.html">Label the columns in a data set</a>
    </li>
    <li>
      <a href="../articles/extract.html">Extract data from a yspec object</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/metrumresearchgroup/yspec/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extend a yspec object</h1>
    <small class="dont-index">Source: <a href="https://github.com/metrumresearchgroup/yspec/blob/scratch/deploy-site/R/extend.R" class="external-link"><code>R/extend.R</code></a></small>
    <div class="hidden name"><code>ys_extend.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Use this function to read and join another spec file to an existing
<code>yspec</code> object. The additional spec file can contain additional columns
that might be added to the data set on an ad-hoc basis or could include
modeling outputs (e.g. <code>IPRED</code>).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ys_extend</span><span class="op">(</span><span class="va">x</span>, file <span class="op">=</span> <span class="fu">ys_extend_file</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, silent <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>yspec</code> object (the primary spec).</p></dd>


<dt id="arg-file">file<a class="anchor" aria-label="anchor" href="#arg-file"></a></dt>
<dd><p>The path to a yaml specification file to load and join to <code>x</code>;
if <code>file</code> is not passed, the <code>yspec</code> object will be searched for the
<code>extend_file</code> attribute in <code>SETUP__:</code> and will fail if it is not found.</p></dd>


<dt id="arg-silent">silent<a class="anchor" aria-label="anchor" href="#arg-silent"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, issue message reporting the number of
columns added via extension; the user will alternatively be warned if there
were no columns added.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The extension is accomplished using <code><a href="ys_join.html">ys_join()</a></code>, so any columns in the
extension spec that already exist in the primary spec are dropped. Use
<code><a href="ys_select.html">ys_select()</a></code> on the the primary spec to drop columns that might be in the
extension and that you want to retain in the result.</p>
<p>If there are no new columns added by extension, that indicates all columns
in the extension spec already exist in primary spec. In this case, a
warning will be generated.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">extension_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"spec"</span>, <span class="st">"nm-extension.yml"</span>, package <span class="op">=</span> <span class="st">"yspec"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">spec</span> <span class="op">&lt;-</span> <span class="va">ys_help</span><span class="op">$</span><span class="fu">spec</span><span class="op">(</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="va">spec2</span> <span class="op">&lt;-</span> <span class="fu">ys_extend</span><span class="op">(</span><span class="va">spec</span>, <span class="va">extension_file</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Note: added 4 columns by extension.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">spec2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     name info unit                         short        source</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24  LDOS  ---   mg              last dose amount             .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25   MDV  -d-    .                           MDV ysdb_internal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26   BLQ  -d-    . below limit of quantification             .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27 PHASE  ---    .         study phase indicator             .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28 STUDY  -d-    .                  study number             .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29    RF  cd-    .          renal function stage             .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30  PRED  --e    .         population prediction  nm-extension</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31 IPRED  --e    .         individual prediction  nm-extension</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32  WRES  --e    .             weighted residual  nm-extension</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 CWRES  --e    . conditional weighted residual  nm-extension</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ys_extend</span><span class="op">(</span><span class="va">spec</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Note: added 5 columns by extension.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  name  info unit         short                          source       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  C     cd-  .            comment character              ysdb_internal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  NUM   ---  .            record number                  ysdb_internal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ID    ---  .            subject identifier             ysdb_internal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  SUBJ  c--  .            subject identifier             ysdb_internal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  TIME  ---  hour         TIME                           look         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  SEQ   -d-  .            SEQ                            .            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  CMT   ---  .            compartment number             ysdb_internal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  EVID  -d-  .            event ID                       ysdb_internal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  AMT   ---  mg           dose amount                    ysdb_internal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  DV    ---  micrograms/L dependent variable             ysdb_internal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  AGE   ---  years        age                            ysdb_internal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  WT    ---  kg           weight                         ysdb_internal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  CRCL  ---  ml/min       CRCL                           .            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ALB   ---  g/dL         albumin                        ysdb_internal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  BMI   ---  m2/kg        BMI                            ysdb_internal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  AAG   ---  mg/dL        alpha-1-acid glycoprotein      .            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  SCR   ---  mg/dL        serum creatinine               .            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  AST   ---  .            aspartate aminotransferase     .            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ALT   ---  .            alanine aminotransferase       .            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  HT    ---  cm           height                         ysdb_internal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  CP    -d-  .            Child-Pugh score               look         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  TAFD  ---  hours        time after first dose          .            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  TAD   ---  hours        time after dose                .            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  LDOS  ---  mg           last dose amount               .            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  MDV   -d-  .            MDV                            ysdb_internal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  BLQ   -d-  .            below limit of quantification  .            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  PHASE ---  .            study phase indicator          .            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  STUDY -d-  .            study number                   .            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  RF    cd-  .            renal function stage           .            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  WRES  --e  .            weighted residuals             analysis1-ext</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  CWRES --e  .            conditional weighted residuals analysis1-ext</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  IPRED --e  .            individual prediction          analysis1-ext</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  PRED  --e  .            population prediction          analysis1-ext</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  LDV   --e  .            log DV                         analysis1-ext</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># In case COL is in both the primary spec and the extension, but you want </span></span></span>
<span class="r-in"><span><span class="co"># to retain what is in the extension</span></span></span>
<span class="r-in"><span><span class="va">spec</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">COL</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">ys_extend</span><span class="op">(</span><span class="st">"extension.yml"</span><span class="op">)</span>   </span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Kyle T Baron.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

      </footer></div>






  </body></html>

